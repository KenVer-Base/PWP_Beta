{% extends 'layout.html' %}
{% block content %}
<div class="feed-header mb-3">Obrolan</div>

<div class="bg-card rounded-4 border overflow-hidden">
    {% if users %}
        {% for u in users %}
        <a href="{{ url_for('main.chat_room', friend_id=u[0]) }}" class="d-flex align-items-center gap-3 p-3 border-bottom text-decoration-none hover-bg">
            <img src="{{ 'https://ui-avatars.com/api/?name=' + u[1] + '&background=random&color=fff&size=128&bold=true' if (not u[2] or u[2] == 'default.png') else url_for('static', filename='uploads/' + u[2]) }}" 
                 class="avatar"
                 onerror="this.src='https://ui-avatars.com/api/?name={{ u[1] }}&background=random&color=fff&size=128&bold=true';">
                 
            <div>
                <div class="fw-bold text-main">{{ u[3] }}</div>
                <div class="small text-muted">@{{ u[1] }}</div>
            </div>
            <i class="bi bi-chat-dots ms-auto text-accent"></i>
        </a>
        {% endfor %}
    {% else %}
        <div class="p-5 text-center text-muted">
            <i class="bi bi-people fs-1"></i>
            <p class="mt-2">Belum ada pengguna lain.</p>
        </div>
    {% endif %}
</div>
{% endblock %}