{% extends 'layout.html' %}
{% block auth_content %}

<div class="d-flex flex-column align-items-center w-100" style="max-width: 400px;">

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show w-100 rounded-4 border-0 shadow-sm mb-3" role="alert" style="z-index: 1050;">
                    <i class="bi bi-info-circle-fill me-2"></i> {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <div class="auth-wrapper show-login" id="authBox">
        
        <div class="auth-tabs">
            <div class="auth-tab-btn active" id="tabLogin" onclick="switchTab('login')">Masuk</div>
            <div class="auth-tab-btn" id="tabRegister" onclick="switchTab('register')">Buat Akun</div>
        </div>

        <div class="forms-slider">
            
            <div class="form-section" id="form-login-section">
                <div class="text-center mb-4">
                    <h4 class="fw-bold">Selamat Datang</h4>
                    <p class="text-muted small">Silakan masuk ke akunmu</p>
                </div>
                
                <form action="{{ url_for('auth.login') }}" method="post">
                    <div class="mb-3">
                        <input type="email" name="email" class="form-control" placeholder="Email Address" required>
                    </div>
                    <div class="mb-4">
                        <input type="password" name="password" class="form-control" placeholder="Password" required>
                    </div>
                    <button type="submit" class="btn-primary-custom mt-0 py-3">Masuk Sekarang</button>
                </form>
            
            </div>

            <div class="form-section" id="form-register-section">
                <div class="text-center mb-4">
                    <h4 class="fw-bold">Bergabunglah</h4>
                    <p class="text-muted small">Buat akun barumu sekarang</p>
                </div>

                <form action="{{ url_for('auth.register') }}" method="post">
                    <div class="mb-3">
                        <input type="text" name="full_name" class="form-control" placeholder="Nama Lengkap" required>
                    </div>

                    <div class="mb-3">
                        <input type="text" name="username" class="form-control" placeholder="Username (Tanpa Spasi)" required>
                    </div>
                    <div class="mb-3">
                        <input type="email" name="email" class="form-control" placeholder="Email Aktif" required>
                    </div>
                    <div class="mb-4">
                        <input type="password" name="password" class="form-control" placeholder="Password Kuat" required>
                    </div>
                    <button type="submit" class="btn-primary-custom mt-0 py-3">Daftar Akun</button>
                </form>


            </div>

        </div>
    </div>
</div>

<script>
    window.onload = function() {
        if (window.location.pathname.includes('register')) {
            switchTab('register');
        }
    };

    function switchTab(mode) {
        const box = document.getElementById('authBox');
        const tabLogin = document.getElementById('tabLogin');
        const tabRegister = document.getElementById('tabRegister');

        if (mode === 'login') {
            box.classList.remove('show-register');
            box.classList.add('show-login');
            tabLogin.classList.add('active');
            tabRegister.classList.remove('active');
        } else {
            box.classList.remove('show-login');
            box.classList.add('show-register');
            tabRegister.classList.add('active');
            tabLogin.classList.remove('active');
        }
    }
</script>

{% endblock %}